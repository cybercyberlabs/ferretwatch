!function(){"use strict";const e="undefined"!=typeof browser?browser:chrome,o={API_CALL:"FERRETWATCH_API_CALL",API_RESPONSE:"FERRETWATCH_API_RESPONSE"};function n(e){window.debugLog&&window.debugLog(e)}function t(e){console.log(`[FW Content] API call received from interceptor: ${e.method} ${e.url}`),n(`[Content] API call captured: ${e.method} ${e.url}`);const o={type:"API_CALL_CAPTURED",data:e};"undefined"!=typeof chrome&&chrome.runtime?chrome.runtime.sendMessage(o).then((()=>{console.log("[FW Content] Message sent to background successfully")})).catch((e=>{console.error("[FW Content] Error sending to background:",e)})):"undefined"!=typeof browser&&browser.runtime&&browser.runtime.sendMessage(o).then((()=>{console.log("[FW Content] Message sent to background successfully")})).catch((e=>{console.error("[FW Content] Error sending to background:",e)}))}function r(e){console.log(`[FW Content] API response received from interceptor: ${e.status} ${e.method} ${e.url}`),n(`[Content] API response captured: ${e.status} ${e.method} ${e.url}`);const o={type:"API_RESPONSE_CAPTURED",data:e};"undefined"!=typeof chrome&&chrome.runtime?chrome.runtime.sendMessage(o,(e=>{chrome.runtime.lastError?console.error("[FW Content] Error sending response to background:",chrome.runtime.lastError):console.log("[FW Content] Response sent to background successfully")})):"undefined"!=typeof browser&&browser.runtime&&browser.runtime.sendMessage(o).then((()=>{console.log("[FW Content] Response sent to background successfully")})).catch((e=>{console.error("[FW Content] Error sending response to background:",e)}))}function s(e){e.source===window&&(e.data&&e.data.type===o.API_CALL&&t(e.data.data),e.data&&e.data.type===o.API_RESPONSE&&r(e.data.data))}function c(){window.addEventListener("message",s),console.log("[FW Content] Message listener registered for window.postMessage")}function d(){window.removeEventListener("message",s),console.log("[FW Content] Message listener removed")}window.FerretWatchMessages={initializeMessageListener:c,removeMessageListener:d,sendApiCallToBackground:t,sendApiResponseToBackground:r}}();