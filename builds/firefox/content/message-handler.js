!function(){"use strict";const e="undefined"!=typeof browser?browser:chrome,n={API_CALL:"FERRETWATCH_API_CALL",API_RESPONSE:"FERRETWATCH_API_RESPONSE"};function r(e){window.debugLog&&window.debugLog(e)}function o(e){r(`[Content] API call captured: ${e.method} ${e.url}`);const n={type:"API_CALL_CAPTURED",data:e};"undefined"!=typeof chrome&&chrome.runtime?chrome.runtime.sendMessage(n).then((()=>{})).catch((e=>{console.error("[FW Content] Error sending to background:",e)})):"undefined"!=typeof browser&&browser.runtime&&browser.runtime.sendMessage(n).then((()=>{})).catch((e=>{console.error("[FW Content] Error sending to background:",e)}))}function t(e){r(`[Content] API response captured: ${e.status} ${e.method} ${e.url}`);const n={type:"API_RESPONSE_CAPTURED",data:e};"undefined"!=typeof chrome&&chrome.runtime?chrome.runtime.sendMessage(n,(e=>{chrome.runtime.lastError&&console.error("[FW Content] Error sending response to background:",chrome.runtime.lastError)})):"undefined"!=typeof browser&&browser.runtime&&browser.runtime.sendMessage(n).then((()=>{})).catch((e=>{console.error("[FW Content] Error sending response to background:",e)}))}function s(e){e.source===window&&(e.data&&e.data.type===n.API_CALL&&o(e.data.data),e.data&&e.data.type===n.API_RESPONSE&&t(e.data.data))}function d(){window.addEventListener("message",s),r("[FW Content] Message listener registered for window.postMessage")}function a(){window.removeEventListener("message",s),r("[FW Content] Message listener removed")}window.FerretWatchMessages={initializeMessageListener:d,removeMessageListener:a,sendApiCallToBackground:o,sendApiResponseToBackground:t}}();